{"version":3,"sources":["js/classes/healthbar.js","js/classes/hearts.js","js/classes/player.js","game.js"],"names":["HealthBar","scene","x","y","maxLife","width","height","_classCallCheck","bar","Phaser","GameObjects","Graphics","currentHealth","percent","draw","add","existing","_createClass","key","value","decrease","amount","clear","fillStyle","fillRect","d","Math","floor","_default","exports","default","Hearts","maxLives","currentLives","hearts","group","repeat","setXY","stepX","_this","getChildren","forEach","heart","index","setVisible","_hearts","_interopRequireDefault","require","obj","__esModule","_typeof","Symbol","iterator","constructor","prototype","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","protoProps","staticProps","_defineProperty","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","call","Number","Player","playerSpeed","playerWeapon","playerHealth","speed","weapon","velocity","sprite","setVelocityX","setVelocityY","health","physics","setCollideWorldBounds","player","decreaseLife","destroy","_healthbar","_player","_player2","_heart","_bullet","_playerBullet","_bossAlienBullet","_alien","_bossAlien","_space","_explosion","_shoot","_impactScream","_drum_n_bass_regal_heavy_electronic_drums","_player1ExplosionSprite","_bossAlienExplosionSprite","_x","_inherits","subClass","superClass","create","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","arguments","apply","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","config","type","AUTO","arcade","gravity","preload","update","params","URLSearchParams","window","location","search","gameSettings","regularAliens","get","game","Game","cursors","alienBullets","playerBullets","upgrades","bg","explosionSound","shootSound","playerDeadSound","level1Music","bossAlien","allowRestart","load","image","playerImg","heartImg","bulletImg","playerBulletImg","alienImg","bossAlienImg","bossAlienBulletImg","spaceBg","x2UpgradeImg","audio","explosionSoundFile","shootSoundFile","impactScreamFile","music1File","spritesheet","player1ExplosionSprite","frameWidth","frameHeight","endFrame","bossAlienExplosionSprite","tileSprite","setOrigin","keyboard","createCursorKeys","Alien","_Phaser$Physics$Arcad","_super","texture","shootDelay","movementSpeed","spawning","world","enable","startShooting","startMoving","dropUpgrade","x2","upgrade","setSpeed","setWeapons","expire","setup","setPosition","setActive","_this2","shoot","bullet","active","nextShootEvent","time","delayedCall","Between","initialDelay","_this3","move","direction","distance","targets","healthBar","tweens","duration","ease","onComplete","movementDelay","nextMoveEvent","Physics","Arcade","Sprite","RegularAlien","_Alien","_super2","BossAlien","_Alien2","_super3","_this4","life","_this5","setLife","_this6","bossAlienBullet","angle","Angle","velocityX","cos","velocityY","sin","setVelocity","classType","alien","sound","setVolume","play","anims","frames","generateFrameNumbers","start","end","first","frameRate","hideOnComplete","overlap","playerBullet","remove","dropUpgradeChance","aliensAlive","bossAlienGroup","text","font","fill","playerSprite","alienBullet","explosion","youLoseText","spaceToRestartText","left","isDown","right","down","up","Input","Keyboard","JustDown","space","playerBullet1","playerBullet2","restart","tilePositionY"],"mappings":"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AA,YAAAxB,SAAA,4DAAAoB,IAAA,gBAAAF,MAAA,GAAAQ,MAAA,EAAAP,KAAA;ACoBjC,ADpBiC,ICoBjCqC,AHlBI,ACAA,ACAE7B,IFAE,ACAA,CDAC5E,ACAAN,CAAC,ACAE,EFAA,CCACA,CAAC,CDAC,IAAIO,MAAM,CAACC,WAAW,CAACC,OGkBtC,CHlB8C,CAACV,CGkB/C6C,IHlBoD,CAAC,iBGkBrD,CAAAC,OAAA;AAGA,EDpBE,ECoBFmE,AHnBI,ACDA,IDCI,ACDA,CDCChH,ACDAC,CDCC,ACDA,CCARiF,EFCWlF,ACDAC,CDCC,ACDA,ICAAF,KAAK,EAAEC,CAAC,CCoBtB,CDpBwBC,CAAC,CCoBzB2C,CDpB2BuC,WAAW,EAAEC,QCoBxC,CAAAvC,GDpBoD,EAAEwC,ECoBtD,UDpBkE,EAAE;ACqBpE,IAAA4B,AHnBI,ACDA,ACDgE,IFE5D,ACDA,ACD4D5E,CFE3DpC,ACDA6B,CDCC,GAAG7B,AEFuD,CFEtD,GCDG,GAAG6B,QAAQ,CEoB5B,GAAAc,sBAAA,CAAAC,OAAA;AAGA,IAAAqE,AHrBI,ACDA,ACFgE7G,ECwBpE,EHrBQ,ACDA,CEsBRuC,AHrBS1C,ACDA6B,ODCO,GAAG7B,AEHiD,EDE/C,GAAG4B,EDCE,AEH0CoD,KCwBpE,CAAArC,AFtBgC,ACFoC,OCwBpE;AAAoD,IHpBhD,ACAA,ACJgEyB,IFI5D,ACAA,CEoB4C1B,AHpB3ClC,ACAAsB,MAAM,GAAGjC,CCJkD,GFI9C,CCAC,CAACc,CDACX,ECAE,CAAC+B,IEoBwBa,AHpBpB,CCAC,CAAC,CEoBkB,GDZvC,QCYuCA,EDZtCwC,CCYsC,IAAAxC,ADZjC,EAAK,CCY4B,CAAAC,UAAA,GAAAD,GAAA,KAAAlB,OAAA,EAAAkB,GAAA;AAAA,IHnBhD,ECAE9B,ACQFqB,EFRI,CGmB4CW,AHnB3CrC,ACAA,EAAE,ACQH,CAAC2E,IFRO,CGmBoCxC,ADXtC,CDRI,CDAC,CGmBiC,AHnBhC,AEQHwC,KAAK,iCCW8BtC,OAAA,wBAAAC,MAAA,uBAAAA,MAAA,CAAAC,QAAA,aAAAJ,GAAA,kBAAAA,GAAA,gBAAAA,GAAA,WAAA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A,CAAAX,CAAA,KA3BpD;AAIA,IDEI,EFmBA,ACVA,ECTI,CAAC5B,CFmBD,ACVA,CDUCjF,ACVAoB,ICTM,GFmBC,AEnBEsD,GFmBC,ECVE,EDUE,CAAC3E,CCVCS,GCTK,GDSC,MDUM,GAAG,IAAI,CAACjB,OAAO;AGXpD,IDNI,EFkBA,EElBI,CAACuF,CFkBD,CAAC7E,IAAI,AElBE,CFkBD,CAAC,CElBGb,KAAK,CAAC8F,OAAO,CAAChF,GAAG,CAAC4E,MAAM,CAACzF,CAAC,EAAEC,CAAC,EAAE,QAAQ,CAAC;ACW1D,IHQE,AElBE,EDQA,ECRI,CAACwF,MAAM,CAACK,qBAAqB,CAAC,IAAI,CAAC,CAAC,CAAC;ACa7C,EHKG,EEjBC,EDQA,ECRI,CAACL,CDQD,IAAI,CAAC1D,ACRE,CAACgE,MAAM,GAAG,EDQA,ECRI,CDQD,CAAC,EAAE;AEQ/B,IHCG/E,AEfC,GFeD,CCRG,ACPE,CAACgB,GDOC,CAACD,ECPI,GAAG,IAAIF,GDOC,GAAG,CAAC,QCPC,CAAC9B,KAAK,EAAE,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC6F,MAAM,CAAC;ACiBzD,EDhBE,ECgBIwD,AHFHnI,ECPC,GDOD,CGES,CHAV,EGAa,OHAbL,KAAA,EAAO;EGCPyI,ADjBCtI,ICiBG,AHAF,EGAIR,EHAA,CAACD,GGAK,AHAF,AEjBT,CCiBYgJ,AHAFlI,AEjBV8D,ICiBgB,CHAD,CAAC,AEjBhB,CFiBiB;EGClB/E,EDlBCa,EDSC,CESG,ADlBJ,ECkBM,IAAI;EACXZ,EDnBCa,EFmBC,ACTA,EESI,CDnBL,CCmBO,AFTF,CAACe,ACQP,ECCW,IFTE,CAACM,ECQd0D,SDRyB,CAAC,CAAC,CAACzD,CCQfpB,MDRsB,ACQhB,CDRiB,CCQf,SDRgBqB,KAAK,EAAEC,KAAK,EAAK;EEUtDoD,IHAE,AEDA,EDRErD,CESG,CHAD,AEDA,CCCG,AHAFlC,AEDAsF,EDRE,CDSC,ACTAlD,CDSCrB,EEDE,IAAIF,GFCG,ACTA,CDSC,ACTAsB,ECQE,GDRG,GDSG,ACTAJ,CDSC,ICTG,CAACN,YAAY,CAAC;IEU7CH,EHAA,ACTA,ACQA,CDRC,CAAC,EDSE,AEDA,CCCG,AHAFtB,AEDA0B,ECCI,CHAD,CAACV,EEDE,CAACJ,GCCK,EHAA,CAAC,EEDE,CAACC,CFCC,CAACnB,CAAC,GAAG,AEDA,CFCC,AEDA,EFCE,IAAI,CAACC,CAAC,GAAG,CAAC,EAAE,IAAI,CAACE,KAAK,EAAE,IAAI,CAACC,MAAM,CAAC;IGClEmJ,AFTF,ACQA,EFEE,IGDM,AHCF,EGDI,EHCA,CAAC5I,OAAO,GAAG,GAAG,EAAE;ECVzB,ACQA,ICEG6I,EHCA,IAAI,CGDG,AHCFlJ,EGDI,CHCD,CAACe,SAAS,CAAC,QAAQ,CAAC;ECX/B,ECQAL,EFIC,CAAC,AEJF,CCEcf,CAAC,AFVf4B,EEUiB,EHET,ECZR;AAAA,ICQAZ,ECEmB,EHGhB,CELH,EAED,CFGQ,CAACX,GAAG,CAACe,GEHb4E,MFGsB,CAAC,CEHvB,EAAU,KFGqB,CAAC;ACb/B,IEWC,AFXDvE,EDcC,AEHA,IAAI,CAAC+D,CDXN,GAGY5D,ECQA,CAACoE,GDRK,ICQE,CAAC,CAAC;ADRJtE,EESnB,CAAC,CDAD,GDTmB,CAAAC,OAAA,GAAAF,QAAA;EEUnB3B,ADDC,IFIC,CGHG,EAAE;EDDN,ECEC0J,EHGA,GELDvE,CFKK3D,CGHG,AHGF,EGHIkI,CHGDjI,CELT,GFKa,CAACC,CGHG,IHGE,CAAC,IAAI,CAACd,OAAO,GAAG,IAAI,CAACR,KAAK,CAAC;AEL9C,ICGCmH,EHIA,IGJM,AHIF,CAAChH,CGJGgH,EHIA,CAAChG,GGJK,KHIG,CAAC,IAAI,CAACtB,CAAC,GAAG,CAAC,EAAE,IAAI,CAACC,CAAC,GAAG,CAAC,EAAEsB,CAAC,EAAE,IAAI,CAACnB,MAAM,CAAC;AEP1D,ICICsJ,AHIF,AERChI,MCIO,EAAEgI,ADJT,GAEYxE,MAAM;AAAAvD,ECGnB,AHGC,KENkB,CAAAC,OAAA,GAAAF,QAAA;ACIrB,CAAC,CHEE,OAAA5B,SAAA;AGAH,AHAG,IGAC6J,MAAM,GAAG,IAAIC,eAAe,CAACC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC;AAExD,AHFG,IGECC,AHFDtI,Q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","file":"game.7bbe06d5.js","sourceRoot":"..","sourcesContent":["class HealthBar {\n  constructor(scene, x, y, maxLife, width, height) {\n    this.bar = new Phaser.GameObjects.Graphics(scene);\n\n    this.x = x;\n    this.y = y;\n    this.maxLife = maxLife;\n    this.currentHealth = maxLife;\n    this.percent = 1;\n\n    this.width = width || 80;\n    this.height = height || 14;\n\n    this.draw();\n\n    scene.add.existing(this.bar);\n  }\n\n  decrease(amount) {\n    this.currentHealth -= amount;\n\n    if (this.currentHealth < 0) {\n      this.currentHealth = 0;\n    }\n\n    this.percent = this.currentHealth / this.maxLife;\n    this.draw();\n  }\n\n  draw() {\n    this.bar.clear();\n\n    // White BG\n    this.bar.fillStyle(0xffffff);\n    this.bar.fillRect(this.x + 2, this.y + 2, this.width, this.height);\n\n    if (this.percent < 0.3) {\n      this.bar.fillStyle(0xff0000);\n    } else {\n      this.bar.fillStyle(0x00ff00);\n    }\n\n    // Actual health bar\n    var d = Math.floor(this.percent * this.width);\n\n    this.bar.fillRect(this.x + 2, this.y + 2, d, this.height);\n  }\n}\n\nexport default HealthBar;\n","class Hearts {\n  constructor(scene, x, y, maxLives) {\n    this.x = x;\n    this.y = y;\n    this.maxLives = maxLives;\n    this.currentLives = maxLives;\n\n    this.hearts = scene.add.group({\n      key: \"heart\",\n      repeat: this.maxLives - 1,\n      setXY: { x: this.x, y: this.y, stepX: 32 },\n    });\n  }\n\n  decrease(amount) {\n    this.currentLives -= amount;\n\n    // Can't go below 0\n    if (this.currentLives < 0) {\n      this.currentLives = 0;\n    }\n\n    // Redraw hearts\n    this.hearts.getChildren().forEach((heart, index) => {\n      heart.setVisible(index < this.currentLives);\n    });\n  }\n}\n\nexport default Hearts;\n","import Hearts from \"./hearts.js\";\n\nclass Player {\n  constructor(scene, x, y, playerSpeed, playerWeapon, playerHealth) {\n    this.speed = playerSpeed;\n    this.weapon = playerWeapon;\n    this.health = playerHealth;\n\n    this.sprite = scene.physics.add.sprite(x, y, \"player\");\n    this.sprite.setCollideWorldBounds(true); // keeps the player within the game world\n    this.sprite.player = this;\n\n    this.hearts = new Hearts(scene, 30, 830, this.health);\n  }\n\n  setSpeed = (speed) => {\n    this.speed = speed;\n  };\n\n  setWeapons = (weapon) => {\n    this.weapon = weapon;\n  };\n\n  setVelocityX = (velocity) => {\n    this.sprite.setVelocityX(velocity);\n  };\n\n  setVelocityY = (velocity) => {\n    this.sprite.setVelocityY(velocity);\n  };\n\n  decreaseLife(amount) {\n    this.health -= amount;\n    this.hearts.decrease(amount);\n  }\n\n  destroy() {\n    this.sprite.destroy();\n  }\n}\nexport default Player;\n","// Classes\nimport HealthBar from \"./js/classes/healthbar.js\";\nimport Player from \"./js/classes/player.js\";\n\n// Images\nimport playerImg from \"./assets/player.png\";\nimport heartImg from \"./assets/heart.png\";\nimport bulletImg from \"./assets/bullet.png\";\nimport playerBulletImg from \"./assets/player-bullet.png\";\nimport bossAlienBulletImg from \"./assets/boss-alien-bullet.png\";\nimport alienImg from \"./assets/alien.png\";\nimport bossAlienImg from \"./assets/boss-alien.png\";\nimport spaceBg from \"./assets/space.png\";\n\n// Sounds\nimport explosionSoundFile from \"./assets/sounds/explosion.wav\";\nimport shootSoundFile from \"./assets/sounds/shoot.wav\";\nimport impactScreamFile from \"./assets/sounds/impact-scream.wav\";\n\n// Music\nimport music1File from \"./assets/music/172_drum_n_bass_regal_heavy_electronic_drums.wav\";\n\n// Sprites\nimport player1ExplosionSprite from \"./assets/player-1-explosion-sprite.png\";\nimport bossAlienExplosionSprite from \"./assets/boss-alien-explosion-sprite.png\";\n\n// Upgrades\nimport x2UpgradeImg from \"./assets/upgrades/x2.png\";\n\nconst config = {\n  type: Phaser.AUTO,\n  width: 1500,\n  height: 900,\n  physics: {\n    default: \"arcade\",\n    arcade: {\n      gravity: { y: 0 },\n    },\n  },\n  scene: {\n    preload: preload,\n    create: create,\n    update: update,\n  },\n};\n\nlet params = new URLSearchParams(window.location.search);\n\nlet gameSettings = {\n  playerSpeed: 330,\n  playerWeapon: \"bullets\",\n  playerHealth: 3,\n  regularAliens: params.get(\"regularAliens\") ? params.get(\"regularAliens\") : 11,\n};\n\nlet game = new Phaser.Game(config);\nlet player;\nlet cursors;\nlet alienBullets;\nlet playerBullets;\nlet upgrades;\nlet bg;\nlet explosionSound;\nlet shootSound;\nlet playerDeadSound;\nlet level1Music;\nlet bossAlien;\nlet allowRestart = false;\n\nfunction preload() {\n  this.load.image(\"player\", playerImg);\n  this.load.image(\"heart\", heartImg);\n  this.load.image(\"bullet\", bulletImg);\n  this.load.image(\"playerBullet\", playerBulletImg);\n  this.load.image(\"alien\", alienImg);\n  this.load.image(\"bossAlien\", bossAlienImg);\n  this.load.image(\"bossAlienBullet\", bossAlienBulletImg);\n  this.load.image(\"space\", spaceBg);\n  this.load.image(\"x2Upgrade\", x2UpgradeImg);\n  this.load.audio(\"explosionSound\", explosionSoundFile);\n  this.load.audio(\"shootSound\", shootSoundFile);\n  this.load.audio(\"impactScreamSound\", impactScreamFile);\n  this.load.audio(\"level1Music\", music1File);\n  this.load.spritesheet(\"player-1-explosion\", player1ExplosionSprite, {\n    frameWidth: 230,\n    frameHeight: 125,\n    endFrame: 9,\n  });\n  this.load.spritesheet(\"boss-alien-explosion\", bossAlienExplosionSprite, {\n    frameWidth: 600,\n    frameHeight: 420,\n    endFrame: 10,\n  });\n}\n\nfunction create() {\n  /*\n   * SCENE\n   */\n  bg = this.add.tileSprite(0, 0, 1500, 900, \"space\");\n  bg.setOrigin(0, 0);\n\n  player = new Player(\n    this,\n    config.width / 2,\n    config.height - 150,\n    gameSettings.playerSpeed,\n    gameSettings.playerWeapon,\n    gameSettings.playerHealth\n  );\n\n  /*\n   * MISC SPRITES\n   */\n  cursors = this.input.keyboard.createCursorKeys();\n  alienBullets = this.physics.add.group();\n  playerBullets = this.physics.add.group();\n\n  /*\n   * ALIENS\n   */\n  class Alien extends Phaser.Physics.Arcade.Sprite {\n    constructor(scene, texture, shootDelay, movementSpeed, spawning) {\n      super(scene, 0, 0, texture);\n      this.scene = scene;\n      this.shootDelay = shootDelay;\n      this.movementSpeed = movementSpeed;\n      this.spawning = spawning;\n      // Add this to the physics system\n      this.scene.physics.world.enable(this);\n      // Initialize shooting and moving\n      if (!this.spawning) {\n        this.startShooting();\n      }\n      if (!this.spawning) this.startMoving();\n\n      this.dropUpgrade = {\n        x2: () => {\n          let upgrade = upgrades.create(this.x, this.y, \"x2Upgrade\");\n          upgrade.enable = (player) => {\n            player.setSpeed(gameSettings.playerSpeed * 1.5);\n            player.setWeapons(\"double-bullets\");\n          };\n          upgrade.expire = (player) => {\n            player.setSpeed(gameSettings.playerSpeed);\n            player.setWeapons(\"bullets\");\n          };\n          upgrade.setVelocityY(200);\n        },\n      };\n    }\n\n    setup(x, y) {\n      this.setPosition(x, y);\n      this.setActive(true);\n      this.setVisible(true);\n      //this.setCollideWorldBounds(true); TOOD: implement\n    }\n\n    startShooting() {\n      if (params.get(\"noAlienShooting\")) return;\n      let shoot = () => {\n        let bullet = alienBullets.create(\n          this.x,\n          this.y + this.height / 2,\n          \"bullet\"\n        );\n        bullet.setVelocityY(300);\n\n        if (this.active) {\n          this.nextShootEvent = this.scene.time.delayedCall(\n            Phaser.Math.Between(350, this.shootDelay),\n            shoot,\n            [],\n            this\n          );\n        }\n      };\n\n      // Add an initial delay before the first shot\n      let initialDelay = Phaser.Math.Between(0, this.shootDelay);\n      this.nextShootEvent = this.scene.time.delayedCall(\n        initialDelay,\n        shoot,\n        [],\n        this\n      );\n    }\n\n    startMoving() {\n      let move = () => {\n        if (!this.active) return;\n\n        let direction = Phaser.Math.Between(-1, 1);\n        let distance = Phaser.Math.Between(0, 100);\n\n        // calculate the target x position\n        let target = this.x + direction * distance;\n        if (target > this.scene.game.config.width - this.width || target < 0) {\n          target = this.x;\n        }\n\n        let targets;\n        if (this.healthBar) {\n          targets = [this, this.healthBar.bar];\n        } else {\n          targets = [this];\n        }\n\n        // Create a tween that changes the x position of the alien\n        this.scene.tweens.add({\n          targets: targets,\n          x: target,\n          duration: this.movementSpeed, // random duration between 500ms and 1500ms\n          ease: \"Linear\", // use linear easing\n          onComplete: this.active ? move : null, // call this function again once the tween completes\n        });\n      };\n\n      let movementDelay = Phaser.Math.Between(0, this.movementSpeed);\n      this.nextMoveEvent = this.scene.time.delayedCall(\n        movementDelay,\n        move,\n        [],\n        this\n      );\n    }\n  }\n\n  class RegularAlien extends Alien {\n    constructor(scene) {\n      super(scene, \"alien\", 4300, 1200);\n    }\n  }\n\n  class BossAlien extends Alien {\n    constructor(scene) {\n      super(scene, \"bossAlien\", 1800, 400, true);\n      this.life = 20;\n      this.healthBar = new HealthBar(\n        this.scene,\n        this.x - 41,\n        this.y + 40,\n        this.life\n      );\n    }\n\n    // Set the starting position of the boss alien\n    setup(x, y) {\n      this.setPosition(x, -100);\n      this.spawning = true;\n      // move the bossalien into position\n      this.scene.tweens.add({\n        targets: this,\n        y: y,\n        duration: 1300,\n        ease: \"Linear\", // use linear easing\n        onComplete: () => {\n          this.startMoving();\n          this.startShooting();\n          this.spawning = false;\n        },\n      });\n\n      this.setActive(true);\n      this.setVisible(true);\n    }\n\n    setLife(value) {\n      this.healthBar.decrease(this.life - value);\n      this.life = value;\n    }\n\n    startShooting() {\n      if (params.get(\"noAlienShooting\")) return;\n\n      let shoot = () => {\n        if (!this.active) return;\n\n        let bossAlienBullet = alienBullets.create(\n          this.x,\n          this.y + this.height / 2 - 70,\n          \"bossAlienBullet\"\n        );\n\n        // Determine the angle towards the target\n        let angle = Phaser.Math.Angle.Between(\n          this.x,\n          this.y,\n          player.sprite.x,\n          player.sprite.y\n        );\n\n        // Determine the speed of movement\n        let speed = 350;\n\n        // Determine the x and y velocities\n        let velocityX = speed * Math.cos(angle);\n        let velocityY = speed * Math.sin(angle);\n\n        // Set these velocities\n        bossAlienBullet.setVelocity(velocityX, velocityY);\n\n        if (this.active) {\n          this.nextShootEvent = this.scene.time.delayedCall(\n            Phaser.Math.Between(270, this.shootDelay),\n            shoot,\n            [],\n            this\n          );\n        }\n      };\n\n      shoot();\n    }\n  }\n\n  // Create the aliens\n  let regularAliens = this.physics.add.group({\n    classType: RegularAlien,\n  });\n\n  for (let i = 0; i < gameSettings.regularAliens; i++) {\n    let alien = regularAliens.get();\n    alien.setup(100 + 130 * i, 100);\n  }\n\n  /*\n   * UPGRADES\n   */\n\n  upgrades = this.physics.add.group();\n\n  /*\n   * SOUNDS\n   */\n  explosionSound = this.sound.add(\"explosionSound\");\n  shootSound = this.sound.add(\"shootSound\");\n  playerDeadSound = this.sound.add(\"impactScreamSound\");\n\n  /*\n   *\n   * DEVELOPMENT TOOLS\n   *\n   * Enable these as query strings when needed\n   * *\n   */\n\n  // Add music, unless the user said they don't want it\n  if (params.get(\"noMusic\") !== \"true\") {\n    if (!level1Music) {\n      level1Music = this.sound.add(\"level1Music\");\n      level1Music.setVolume(0.8);\n      level1Music.play();\n    }\n  }\n\n  if (params.get(\"dropUpgrades\") === \"true\") {\n    regularAliens.getChildren()[5].dropUpgrade.x2();\n  }\n\n  /*\n   * ANIMATIONS\n   */\n\n  // Add animations\n  this.anims.create({\n    key: \"explode\",\n    frames: this.anims.generateFrameNumbers(\"player-1-explosion\", {\n      start: 0,\n      end: 8,\n      first: 0,\n    }),\n    frameRate: 23,\n    repeat: 0,\n    hideOnComplete: true,\n  });\n\n  this.anims.create({\n    key: \"bossAlienExplode\",\n    frames: this.anims.generateFrameNumbers(\"boss-alien-explosion\", {\n      start: 0,\n      end: 10,\n      first: 0,\n    }),\n    frameRate: 23,\n    repeat: 0,\n    hideOnComplete: true,\n  });\n\n  /*\n   * OVERLAPS\n   */\n\n  // When a player bullet hits an alien (or later, a boss alien)\n  this.physics.add.overlap(\n    playerBullets,\n    regularAliens,\n    function (playerBullet, alien) {\n      playerBullet.destroy();\n      explosionSound.play();\n      if (alien.nextShootEvent) {\n        alien.nextShootEvent.remove();\n      }\n      alien.destroy();\n\n      // Drop an upgrade\n      let dropUpgradeChance = Phaser.Math.Between(0, 100);\n      if (dropUpgradeChance > 80) {\n        alien.dropUpgrade.x2();\n      }\n\n      // Let's see if all regular aliens are dead\n      let aliensAlive = false;\n      regularAliens.getChildren().forEach((alien) => {\n        if (alien.active) {\n          aliensAlive = true;\n        }\n      });\n      if (aliensAlive === false && player.sprite.active) {\n        let bossAlienGroup = this.physics.add.group({ classType: BossAlien });\n        bossAlien = bossAlienGroup.get();\n        bossAlien.setup(config.width / 2, 170);\n\n        // If the player hits the boss alien\n        this.physics.add.overlap(\n          bossAlien,\n          playerBullets,\n          function (bossAlien, playerBullet) {\n            // Don't allow shooting the boss while it's spawning\n\n            playerBullet.destroy();\n\n            if (bossAlien.spawning) return;\n            bossAlien.setLife(bossAlien.life - 1);\n\n            if (bossAlien.life === 0 && player.sprite.active) {\n              bossAlien.destroy();\n              bossAlien.healthBar.bar.destroy();\n              this.physics.add\n                .sprite(bossAlien.x, bossAlien.y, \"bossAlienExplode\")\n                .play(\"bossAlienExplode\");\n              explosionSound.play();\n\n              // Show \"You win\" text\n              let text = this.add\n                .text(0, 0, \"You win!\", {\n                  font: '64px \"Arial Black\"',\n                  fill: \"#fff\",\n                })\n                .setOrigin(0.5, 0.5)\n                .setPosition(config.width / 2, config.height / 2)\n                .setVisible(false);\n\n              this.time.delayedCall(\n                900,\n                function () {\n                  text.setVisible(true); // after 300ms, the text becomes visible\n                },\n                [],\n                this\n              );\n            }\n          },\n          null,\n          this\n        );\n      }\n    },\n    null,\n    this\n  );\n\n  // When the player is hit by an alien bullet\n  this.physics.add.overlap(\n    player.sprite,\n    alienBullets,\n    function (playerSprite, alienBullet) {\n      playerSprite.player.decreaseLife(1);\n      alienBullet.destroy();\n      playerDeadSound.play();\n\n      if (player.health > 0) return;\n\n      alienBullet.destroy();\n      let explosion = this.physics.add.sprite(\n        playerSprite.x,\n        playerSprite.y,\n        \"explosion\"\n      );\n      explosion.play(\"explode\");\n      player.destroy();\n\n      let youLoseText = this.add\n        .text(0, 0, \"You lose\", {\n          font: '64px \"Arial Black\"',\n          fill: \"#fff\",\n        })\n        .setOrigin(0.5, 0.5)\n        .setPosition(config.width / 2, config.height / 2)\n        .setVisible(false);\n\n      let spaceToRestartText = this.add\n        .text(0, 0, \"Hit <Space> to restart\", {\n          font: '34px \"Arial Black\"',\n          fill: \"#fff\",\n        })\n        .setOrigin(0.5, 0.5)\n        .setPosition(config.width / 2, config.height / 2 + 100)\n        .setVisible(false);\n\n      this.time.delayedCall(\n        600,\n        function () {\n          youLoseText.setVisible(true);\n        },\n        [],\n        this\n      );\n      this.time.delayedCall(\n        2100,\n        function () {\n          spaceToRestartText.setVisible(true);\n          allowRestart = true;\n        },\n        [],\n        this\n      );\n    },\n    null,\n    this\n  );\n\n  // When the player picks up an upgrade\n  this.physics.add.overlap(\n    player.sprite,\n    upgrades,\n    function (playerSprite, upgrade) {\n      upgrade.enable(playerSprite.player);\n      upgrade.destroy();\n\n      this.time.delayedCall(\n        3500,\n        function () {\n          upgrade.expire(playerSprite.player);\n        },\n        [],\n        this\n      );\n    },\n    null,\n    this\n  );\n}\n\nfunction update() {\n  // Move using the arrow keys\n  if (player.sprite.active) {\n    if (cursors.left.isDown) {\n      player.setVelocityX(-player.speed);\n    } else if (cursors.right.isDown) {\n      player.setVelocityX(player.speed);\n    } else if (cursors.down.isDown) {\n      player.setVelocityY(player.speed);\n    } else if (cursors.up.isDown) {\n      player.setVelocityY(-player.speed);\n    } else {\n      player.setVelocityX(0);\n      player.setVelocityY(0);\n    }\n  }\n\n  // Shoot using the space bar\n  if (Phaser.Input.Keyboard.JustDown(cursors.space)) {\n    if (player.sprite.active) {\n      if (player.weapon === \"bullets\") {\n        let playerBullet = playerBullets.create(\n          player.sprite.x,\n          player.sprite.y - player.sprite.height + 40,\n          \"playerBullet\"\n        );\n        playerBullet.setVelocityY(-player.speed);\n        shootSound.play();\n      } else if (player.weapon === \"double-bullets\") {\n        let playerBullet1 = playerBullets.create(\n          player.sprite.x - 20,\n          player.sprite.y - player.sprite.height + 40,\n          \"playerBullet\"\n        );\n        playerBullet1.setVelocityY(-player.speed);\n        let playerBullet2 = playerBullets.create(\n          player.sprite.x + 20,\n          player.sprite.y - player.sprite.height + 40,\n          \"playerBullet\"\n        );\n        playerBullet2.setVelocityY(-player.speed);\n        shootSound.play();\n      }\n    } else {\n      if (allowRestart) {\n        // Restart the game\n        allowRestart = false;\n        this.scene.restart();\n      }\n    }\n  }\n\n  // Move the texture of the tile sprite upwards\n  bg.tilePositionY -= 1.1;\n}\n"]}